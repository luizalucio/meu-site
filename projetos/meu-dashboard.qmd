---
title: "„Ö§„Ö§Focos de queimadas e inc√™ndios"
format: 
  dashboard:
    orientation: columns
    theme:
      - sandstone
logo: logo_branca_da_ufla.png
output: 
  flexdashboard::flex_dashboard:
  vertical_layout: fill
---

```{r, message=FALSE, warning=FALSE}
#m√©dia 
# pacotes necess√°rios
library(tidyverse)
library(ggplot2)
library(lubridate)
library(dplyr)

# lendo a base 
focos_mensal <- read.csv("focos_mensal_202505.csv", header = TRUE, sep = ",")

# data
focos_mensal$data_hora_gmt <- as.Date(focos_mensal$data_hora_gmt, tryFormats = c("%Y-%m-%d"))

# Filtra somente os dados do Brasil e seleciona vari√°veis de interesse
dados <- focos_mensal |>
  filter(pais == "Brasil") |>
  select(pais, lat, lon, data_hora_gmt, estado, municipio,
         numero_dias_sem_chuva, precipitacao, risco_fogo, bioma, frp)

# tirando os valores negativos e NA
dados <- dados |>
  mutate(across(c(numero_dias_sem_chuva, precipitacao, risco_fogo, frp),
                ~ ifelse(. < 0, NA, .))) |>
  drop_na(numero_dias_sem_chuva, precipitacao, risco_fogo, frp)

# agrupando por data, estado e bioma para calcular as m√©dias
dados <- dados |>
  group_by(data_hora_gmt, estado, bioma) |>
  summarise(
    numero_dias_sem_chuva = round(mean(numero_dias_sem_chuva, na.rm = TRUE), 3),
    precipitacao = round(mean(precipitacao, na.rm = TRUE), 3),
    risco_fogo = round(mean(risco_fogo, na.rm = TRUE), 3),
    frp = round(mean(frp, na.rm = TRUE), 3),
    .groups = "drop"
  )
```

# Descri√ß√£o dos Dados

## Column {width=60%}

Esta an√°lise explorat√≥ria de dados tem como objetivo investigar os focos de queimadas e inc√™ndios no Brasil durante o m√™s de maio de 2025.  
O p√∫blico-alvo √© a sociedade em geral, com √™nfase especial nos brasileiros, visto que o foco dos dados √© o territ√≥rio nacional.  

### Observa√ß√µes e vari√°veis 

Na base de dados original, temos 131.180 observa√ß√µes e 16 vari√°veis de tr√™s tipos. As vari√°veis do tipo chr (character), double (dbl), integer (int) e do tipo date.  

A base original trata da Am√©rica Latina e o foco da an√°lise foi somente no Brasil, ent√£o afunilei seguindo essa linha de racioc√≠nio e, no total, trabalhei com 930 observa√ß√µes e 5 vari√°veis:  data, estado, dia sem chuva, risco fogo e bioma.


## Column {width=40%}

![](mapa_br.png){width=100%}
Fonte: [https://firms.modaps.eosdis.nasa.gov/map/#d:24hrs;@-17.6,-2.4,3.2z](https://firms.modaps.eosdis.nasa.gov/map/#d:24hrs;@-17.6,-2.4,3.2z)

# An√°lise de Frequ√™ncias

```{r, message=FALSE, warning=FALSE}
# dimens√£o geogr√°fica:
#onde tem mais cr√≠ticos

library(geobr)
library(dplyr)
library(ggplot2)
library(plotly)
library(stringr)
library(abjutils) # necess√°rio para rm_accent()

# carregar shapes dos estados
estados_geo <- read_state(year = 2020)

# padronizar nomes no geobr
estados_geo <- estados_geo |>
  mutate(name_state_lower = tolower(rm_accent(name_state)) |> str_trim())

# padronizar nomes no seu dado
dados <- dados |>
  mutate(estado_lower = tolower(rm_accent(estado)) |> str_trim())

# calcular m√©dia do risco de fogo por estado
mapa_dados <- dados |>
  group_by(estado_lower) |>
  summarise(media_risco_fogo = mean(risco_fogo, na.rm = TRUE)) |>
  ungroup()

# juntar os dados
mapa_completo <- estados_geo |>
  left_join(mapa_dados, by = c("name_state_lower" = "estado_lower"))

# mapa
risco_fogo <- ggplot(mapa_completo) +
  geom_sf(aes(fill = media_risco_fogo), color = "black") +
  scale_fill_gradient(low = "#fff7bc", high = "#d73027", name = "Risco M√©dio de Fogo") +
  labs(title = "Risco M√©dio de Fogo por Estado - Brasil (Maio 2025)", x= "Longitude", y= "Latitude",
       caption = "Fonte: INPE / geobr") +
  theme_minimal()

ggplotly(risco_fogo)

```

## Focos de Queimadas por Biomas

```{r, message=FALSE, warning=FALSE}

library(plotly)

Biomas <- dados |>
  count(bioma, sort = TRUE) |>
  ggplot(aes(x = reorder(bioma, n), y = n)) +
  geom_col(fill = "brown2") +
  coord_flip() +
  labs(x = "Bioma", y = "Quantidade de Focos de Queimadas", title = "Frequ√™ncia de Focos de Queimadas por Biomas") +
  theme_classic()

ggplotly(Biomas)

```

# Per√≠odos de seca

## Column - Mapa {width=30%}

```{r, message=FALSE, warning=FALSE}

library(dplyr)
library(knitr)

# C√°lculo das estat√≠sticas por estado
estatisticas_estado <- dados |>
  group_by(estado) |>
  summarise(
    mediana_dias_sem_chuva = median(numero_dias_sem_chuva, na.rm = TRUE)
  ) |>
  ungroup()

# Top 5 estados por mediana de dias sem chuva
top_mediana <- estatisticas_estado |>
  slice_max(mediana_dias_sem_chuva, n = 26) |>
  mutate(
    mediana_dias_sem_chuva = format(round(mediana_dias_sem_chuva, 2), decimal.mark = ",")
  )

# Exibir tabela 1 com v√≠rgula decimal
kable(
  top_mediana,
  caption = "N√∫mero mediano de dias sem chuva por estado do Brasil",
  col.names = c("Estado", "Mediana dos dias sem chuva")
)

```


```{r, message=FALSE, warning=FALSE}

library(ggplot2)
library(plotly)

G <- ggplot(dados, aes(x = numero_dias_sem_chuva, y = risco_fogo)) +
  geom_point(alpha = 0.4, color = "firebrick3") +
  scale_size_continuous(name = "FRP (pot√™ncia do fogo)") +
  theme_minimal() +
  labs(title = "Relacionando vari√°veis: Dias sem Chuva X Risco de Fogo",
       x = "N√∫mero de Dias sem Chuva",
       y = "Risco de Fogo")

ggplotly(G)

```

# Informa√ß√µes

## Column {width=60%}

### ABOUT THIS DASHBOARD

Esse dashboard foi desenvolvido como parte do meu processo de aprendizagem no curso de Estat√≠stica da Universidade Federal de Lavras, na disciplina de Organiza√ß√£o e Apresenta√ß√£o de Dados (GES109).  
Os dados foram obtidos no portal de dados abertos do Programa Queimadas do Instituto Nacional de Pesquisas Espaciais (INPE).  
A coleta foi realizada no dia 26/05, a partir do conjunto nomeado [Focos de Queimadas e Inc√™ndios](https://terrabrasilis.dpi.inpe.br/queimadas/portal/dados-abertos/), no formato CSV e referente √† base do m√™s de maio que contempla toda a Am√©rica Latina.

Caso queira acessar o relat√≥rio completo est√° dispon√≠vel em:
[Explorando os focos de queimadas e inc√™ndios do Brasil no m√™s de maio: uma an√°lise baseada em dados](https://luizalucio.github.io/meu-site/projetos.html)

### ABOUT ME

**Desenvolvido por:** Lu√≠za Helena Pereira L√∫cio  
üìß **E-mail:** luiza.lucio1@estudante.ufla.br  
üîó [LinkedIn](https://www.linkedin.com/in/luizahplucio/)  
üòæ [GitHub](https://github.com/luizalucio)

## Column {width=40%}

### Refer√™ncias

**Refer√™ncias**

Instituto Nacional de Pesquisas Espaciais (INPE). Base de dados sobre queimadas ‚Äì TerraBrasilis. Dispon√≠vel em: https://terrabrasilis.dpi.inpe.br/queimadas/portal/dados-abertos/. Acesso em: 26/05/2025.

WICKHAM, Hadley; GROLEMUND, Garrett. R for Data Science (2¬™ edi√ß√£o). Dispon√≠vel em: https://r4ds.hadley.nz/. Acesso em: 28/05/2025.

Quarto Documentation ‚Äì Guide. Dispon√≠vel em: https://quarto.org/docs/guide/. Acesso em: 30/05/2025.

BUCKERIDGE, Marcos. As v√°rias faces dos inc√™ndios no Brasil. Jornal da USP. Dispon√≠vel em: https://jornal.usp.br/articulistas/marcos-buckeridge/as-varias-faces-dos-incendios-no-brasil/. Acesso em: 02/06/2025.

R Core Team (2025). R: A Language and Environment for Statistical Computing. R Foundation for Statistical Computing, Vienna, Austria. <https://www.R-project.org/>

Wickham H, Averick M, Bryan J, Chang W, McGowan LD, Fran√ßois R,
  Grolemund G, Hayes A, Henry L, Hester J, Kuhn M, Pedersen TL, Miller
  E, Bache SM, M√ºller K, Ooms J, Robinson D, Seidel DP, Spinu V,
  Takahashi K, Vaughan D, Wilke C, Woo K, Yutani H (2019). ‚ÄúWelcome to
  the tidyverse.‚Äù _Journal of Open Source Software_, *4*(43), 1686.
  doi:10.21105/joss.01686 <https://doi.org/10.21105/joss.01686>
  
H. Wickham. ggplot2: Elegant Graphics for Data Analysis.
  Springer-Verlag New York, 2016.
  
Garrett Grolemund, Hadley Wickham (2011). Dates and Times Made Easy
  with lubridate. Journal of Statistical Software, 40(3), 1-25. URL
  https://www.jstatsoft.org/v40/i03/.

 Pereira R, Goncalves C (2024). _geobr: Download Official Spatial Data
  Sets of Brazil_. doi:10.32614/CRAN.package.geobr
  <https://doi.org/10.32614/CRAN.package.geobr>, R package version
  1.9.1, <https://CRAN.R-project.org/package=geobr>.
  
   C. Sievert. Interactive Web-Based Data Visualization with R, plotly,
  and shiny. Chapman and Hall/CRC Florida, 2020.
  
   Wickham H (2023). _stringr: Simple, Consistent Wrappers for Common
  String Operations_. doi:10.32614/CRAN.package.stringr
  <https://doi.org/10.32614/CRAN.package.stringr>, R package version
  1.5.1, <https://CRAN.R-project.org/package=stringr>.

 Lente C, Trecenti J (2022). _abjutils: Useful Tools for Jurimetrical
  Analysis Used by the Brazilian Jurimetrics Association_.
  doi:10.32614/CRAN.package.abjutils
  <https://doi.org/10.32614/CRAN.package.abjutils>, R package version
  0.3.2, <https://CRAN.R-project.org/package=abjutils>.

 Xie Y (2025). _knitr: A General-Purpose Package for Dynamic Report
  Generation in R_. R package version 1.50, <https://yihui.org/knitr/>.








  
